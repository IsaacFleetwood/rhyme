jq 'group_by(.key1) | map({(.[0].key1): map(.value) | add}) | add as $grouped | {total: $grouped|add} + $grouped' data/toy.jq